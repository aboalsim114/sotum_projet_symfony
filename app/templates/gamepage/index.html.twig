{% extends 'base.html.twig' %}

{% block title %}Hello GamepageController!{% endblock %}

{% block body %}
    <style>
        body {
            background-color: #2b2b2b;
            color: #fff;
        }

        .container header {
            display: flex;
            flex-direction: row;
            justify-content: space-evenly;
            border-bottom: 2px solid #fff;
            align-items: center;
            margin-top: 10px;
        }

        .container a {
            all: unset;
            cursor: pointer;
            font-size: 25px;
        }

        .GameContainer {
            width: 100%;
            height: auto;
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 8px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat({{ columns }}, 50px);
            gap: 1px;
        }

        .blue-square {
            width: 50px;
            height: 50px;
            background-color: #0077c7;
            text-align: center;
            line-height: 50px;
            font-size: 24px;
            color: white;
            cursor: pointer;
        }

        .blue-square:hover {
            background-color: #0055a7;
            transform: scale(1.05);
            transition: all 0.3s ease;
        }

        .selected-word {
            margin-top: 20px;
            color: #fff;
        }
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">


	<div class="container">
		<header>

			<a href="#" id="rules-button" data-bs-toggle="modal" data-bs-target="#rulesModal">
		<i class="fa-regular fa-circle-question"></i>
	</a>

	<!-- Modal -->
	<div class="modal fade" id="rulesModal" tabindex="-1" aria-labelledby="rulesModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-lg">
			<div class="modal-content" style="background-color: #fff; color: #000;">
				<div class="modal-header" style="background-color: #800000;">
					<h5 class="modal-title" id="rulesModalLabel" style="color: #fff;">Règles</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="color: #fff;"></button>
				</div>

				<div class="modal-body">
					<p style="color: #000;">Vous avez six essais pour deviner le mot du jour, entre 6 et 9 lettres, commun à tous.</p>
					<p style="color: #000;">Vous ne pouvez proposer que des mots commençant par la même lettre que le mot recherché, et qui se trouvent dans notre dictionnaire.</p>
					<p style="color: #000;">Les noms propres ne sont pas acceptés.</p>
					<p style="color: #000;">Le mot change chaque jour. Évitez donc les spoils et privilégiez le bouton de partage.</p>

					<div class="table-responsive">
						<table class="table" style="color: #eee; text-align: center; border: 1px solid #000;">
							<tr>
								<td style="background-color: #f00; color: #fff;">S</td>
								<td style="background-color: #00f; color: #fff;">A</td>
								<td style="background-color: #00f; color: #fff;">L</td>
								<td style="background-color: #ffa500; color: #fff;">U</td>
								<td style="background-color: #ffa500; color: #fff;">T</td>
							</tr>
						</table>
					</div>

					<p style="color: #000;">
						Les lettres entourées d'un carré rouge sont bien placées,<br>
						les lettres entourées d'un cercle jaune sont mal placées (mais présentes dans le mot).<br>
						Les lettres qui restent sur fond bleu ne sont pas dans le mot.
					</p>
				</div>
			</div>
		</div>
	</div>


			<a href="">
				<i class="fa-solid fa-ranking-star"></i>
			</a>
			<h1>Sotum</h1>

			<a href="">
				<i class="fa-solid fa-gear"></i>
			</a>

		</header>

		  <main>
            <div class="container">
                <div class="GameContainer">
                    <div class="grid">
                        {% for row in 1..rows %}
                            {% for column in 1..columns %}
                                <div class="blue-square" contenteditable="true" data-row="{{ row }}" data-correct-letter="{{ validPhrases[row - 1]|first }}">
                                    {% if column == 1 and row - 1 <= lastValidatedRow %}
                                        {{ validPhrases[row - 1]|first }}
                                    {% endif %}
                                </div>
                            {% endfor %}
                        {% endfor %}
                    </div>

                   
                </div>
            </div>
             <!-- Ajoutez cette section pour afficher le mot sélectionné aléatoirement -->
                    <div class="selected-word">
                        Mot sélectionné aléatoirement : {{ validPhrases[0] }}
                    </div>
        </main>
    </div>

   <script>
    window.addEventListener("DOMContentLoaded", function () {
        // Récupérez la liste des cases de saisie
        const inputCells = document.querySelectorAll('.blue-square');

        // Ajoutez un gestionnaire d'événement à chaque case de saisie
        inputCells.forEach(cell => {
            cell.addEventListener('input', handleInput);
        });

        // Affichez le mot sélectionné aléatoirement
        displaySelectedWord();
    });

    function handleInput(event) {
        const userInput = event.target.innerText.toUpperCase();
        const correctWord = event.target.dataset.correctLetter.toUpperCase();

        // Vérifiez si le mot saisi est correct
        if (userInput === correctWord) {
            // Mot correct (vert)
            event.target.style.backgroundColor = '#00FF00';
        } else {
            // Mot incorrect (rouge)
            event.target.style.backgroundColor = '#FF0000';
        }
    }


    function displaySelectedWord() {
        // Récupérez l'élément pour afficher le mot sélectionné
        const selectedWordElement = document.querySelector('.selected-word');

        // Ajoutons une console.log pour débogage
        console.log("Mot sélectionné aléatoirement : ", "{{ validPhrases[0] }}");

        // Affichez le mot sélectionné
        selectedWordElement.innerText = "Mot sélectionné aléatoirement : " + "{{ validPhrases[0] }}";
    }
</script>




    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}